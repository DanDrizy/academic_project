<h2>Register Client</h2>
<form id="clientForm">
  <input type="text" id="c_full_name" placeholder="Full Name" required><br>
  <input type="text" id="c_phone" placeholder="Phone Number" required><br>
  <select id="c_gender">
    <option value="Male">Male</option>
    <option value="Female">Female</option>
  </select><br>
  <input type="text" id="c_location" placeholder="Location"><br>
  <button type="submit">Save Client</button>
</form>

<h2>All Clients</h2>
<ul id="clientList"></ul>

<script>
  const clientApi = "https://academic-project-2-met4.onrender.com/client-users";

  document.getElementById("clientForm").addEventListener("submit", async (e) => {
    e.preventDefault();

    const client = {
      full_name: document.getElementById("c_full_name").value,
      phone_number: document.getElementById("c_phone").value,
      gender: document.getElementById("c_gender").value,
      location: document.getElementById("c_location").value,
      status: "pending"
    };

    const res = await fetch(clientApi, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(client)
    });

    if (res.ok) {
      alert("✅ Client saved!");
      loadClients();
    } else {
      alert("❌ Failed to save client.");
    }
  });

  async function loadClients() {
    const res = await fetch(clientApi);
    const clients = await res.json();

    const list = document.getElementById("clientList");
    list.innerHTML = "";

    clients.forEach(c => {
      const item = document.createElement("li");
      item.textContent = `${c.full_name} (${c.phone_number}, ${c.gender}) – ${c.status}`;
      list.appendChild(item);
    });
  }

  loadClients();
</script>
